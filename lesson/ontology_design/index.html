<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Ontology Design - OBO Semantic Engineering Training</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Ontology Design";
    var mkdocs_page_input_path = "lesson/ontology_design.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OBO Semantic Engineering Training</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">About the course</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../getting_started/">Getting started with learning</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../overview/">Overview of lessons and tutorials</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../contributing/">Contribe to the course</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Lessons</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../contributing_to_obo_ontologies/">Contributing to OBO ontologies</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../ontology_pipelines/">Ontology Pipelines with ROBOT</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Courses</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorial/icbo2021/">ICBO 2021 Tutorial</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../courses/monarch-obo-training/">Monarch Ontology Training</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorial/robot_tutorial_1/">ROBOT Mini-Tutorial 1 - Convert, Extract and Template</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorial/robot_tutorial_2/">ROBOT Mini-Tutorial 2 - Annotate, Merge, Reason and Diff</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorial/robot_tutorial_qc/">ROBOT Mini-Tutorial QC - Quality Control with report and query</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">How-to guides</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/installing_elk_in_protege/">Installing ELK in Protege</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/odk_setup/">Setting up the ODK</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/clone_mondo_repo/">Clone the Mondo ontology repository</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/github_create_fork/">Creating an GitHub Fork</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../howto/github_create_pull_request/">Creating an GitHub Pull Request</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OBO Semantic Engineering Training</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Ontology Design</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="ontology-design">Ontology Design<a class="headerlink" href="#ontology-design" title="Permanent link">&para;</a></h1>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<p>Participants will need to have access to the following resources and tools prior to the training:
- <strong>GitHub account</strong> - register for a free GitHub account <a href="https://github.com/join?ref_cta=Sign+up&amp;ref_loc=header+logged+out&amp;ref_page=%2F&amp;source=header-home">here</a>
- <strong>Protege</strong> - Install Protege 5.5, download it <a href="https://protege.stanford.edu/">here</a>
- <strong><a href="https://github.com/jamesaoverton/obook/blob/master/docs/howto/install_elk_0.5_protege.md">Install ELK 0.5</a></strong> 
- <strong>Install GitHub Desktop</strong> Please make sure you have some kind of git client installed on your machine. If you are new to Git, please install <a href="https://desktop.github.com/">GitHub Desktop</a></p>
<h2 id="preparation">Preparation<a class="headerlink" href="#preparation" title="Permanent link">&para;</a></h2>
<ul>
<li>Review tutorial on <a href="../ontology_term_use/">Ontology Term Use</a></li>
<li>Review tutorial on <a href="https://github.com/jamesaoverton/obook/blob/master/docs/lesson/contributing_to_obo_ontologies.md">Contributing to OBO Ontologies</a></li>
<li>Clone Mondo repo: Follow these instructions to <a href="clone-mond-repo.md">clone the Mondo repo</a></li>
</ul>
<h2 id="what-is-delivered-as-part-of-this-course">What is delivered as part of this course<a class="headerlink" href="#what-is-delivered-as-part-of-this-course" title="Permanent link">&para;</a></h2>
<p><strong>Description</strong>: This course will cover reasoning with OWL.</p>
<h3 id="learning-objectives">Learning objectives<a class="headerlink" href="#learning-objectives" title="Permanent link">&para;</a></h3>
<p>At the end of this lesson, you should know how to do:</p>
<ol>
<li>Add existential restrictions</li>
<li>Add defined classes</li>
<li>Add disjoint axioms</li>
<li>Debug unsatisfiable classes</li>
</ol>
<h2 id="tutorials">Tutorials<a class="headerlink" href="#tutorials" title="Permanent link">&para;</a></h2>
<p><strong>OpenHPI Course Content</strong>
 - <a href="https://open.hpi.de/courses/semanticweb2015/items/2oYC9PkLYvxv4InZuBMBVl">Ontologies and Logic</a> Videos 3.0-3.10 | <strong>Duration:</strong> ~3.5 hrs
 - <a href="https://open.hpi.de/courses/semanticweb2015/items/2oCcvFX4bzhBbNWE6EVpoV">OWL, Rules, and Reasoning</a> Videos 4.0-4.8 | <strong>Duration:</strong> ~2.7 hrs</p>
<h2 id="additional-materials-and-resources">Additional Materials and Resources<a class="headerlink" href="#additional-materials-and-resources" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://tislab.org/ontologyResources.html">Ontology tutorials and Resources</a></li>
<li><a href="https://douroucouli.wordpress.com/">Monkeying around with OWL: Musings on building and using ontologies, posts by Chris Mungall</a></li>
<li><a href="https://github.com/obophenotype/cell-ontology/blob/master/documentation/relations_guide.md">Documentation on Cell Ontology relations</a></li>
<li><a href="https://philpapers.org/archive/SEPGFW.pdf">Guidelines for writing definitions in Ontologies (paper)</a></li>
</ul>
<h2 id="semantic-engineer-toolbox">Semantic Engineer Toolbox<a class="headerlink" href="#semantic-engineer-toolbox" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://protege.stanford.edu/">Protege</a></li>
<li><a href="https://oss.sonatype.org/service/local/artifact/maven/content?r=snapshots&amp;g=org.semanticweb.elk&amp;a=elk-distribution-protege&amp;e=zip&amp;v=LATEST">ELK Protege Plugin</a></li>
<li><a href="https://desktop.github.com/">GitHub Desktop</a></li>
</ul>
<h2 id="contributors">Contributors<a class="headerlink" href="#contributors" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://orcid.org/0000-0001-5208-3432">Nicole Vasilevsky</a></li>
<li><a href="https://orcid.org/0000-0002-7356-1779">Nico Matentzoglu</a></li>
</ul>
<h2 id="owl-class-restrictions">OWL class restrictions<a class="headerlink" href="#owl-class-restrictions" title="Permanent link">&para;</a></h2>
<p>In OWL, we use object properties to describe binary relationships between two individuals (or instances). We can also use the properties to describe new classes (or sets of individuals) using <em>restrictions</em>. A restriction describes a class of individuals based on the relationships that members of the class participate in. In other words, a restriction is a kind of class, in the same way that a named class is a kind of class.</p>
<p>For example, we can use a named class to capture all the individuals that are idiopathic diseases. But we could also describe the class of idiopathic disease as all the instances that are '<em>has modifier'</em> idiopathic disease.</p>
<p>In OWL, there are three main types of restrictions that can be placed on classes. These are <strong>quantifier restriction</strong>, <strong>cardinality restrictions</strong>, and <strong>hasValue</strong> restriction. In this tutorial will initially focus on quantifier restrictions.</p>
<p>Quantifier restrictions are further categorized into two types, the <strong>existential</strong> and the <strong>universal</strong> restriction.</p>
<ul>
<li><strong>Existential</strong> restrictions describe classes of individuals that participate in at least one relationship along a specified property to individuals that are members of a specified class. For example, the class of individuals that have at least one ( <strong>some</strong> ) 'has modifier' relationship to members of the <code>idiopathic disease</code> class. In Protege, the keyword <strong>'some'</strong> is used to denote existential restrictions.</li>
<li><strong>Universal</strong> restrictions describe classes of individuals that for a given property only have relationships along this property to individuals that are members of a specified class. For example, we can say a cellular component is capable of many functions using the existential quantifier, however, OWL semantics assume that there could be more. We can use the universal quantifier to add closure to the existential. That is, we can assert that a cellular component is capable of these functions, and is only capable of those functions and no other. Another example is that the process of hair growth is found <strong>only</strong> in instances of the class Mammalia. In Protege the keyword '<strong>only</strong>' is used.</li>
</ul>
<p>In this tutorial, we will deal exclusively with the existential (some) quantifier.</p>
<h2 id="superclass-restrictions">Superclass restrictions<a class="headerlink" href="#superclass-restrictions" title="Permanent link">&para;</a></h2>
<p><em>Strictly speaking in OWL, you don't make relationships between classes</em>, however, using OWL restrictions we essentially achieve the same thing.</p>
<p>We wanted to capture the knowledge that the named class ' <strong>idiopathic achalasia</strong> is an <strong>idiopathic disease</strong>. In OWL speak, we want to say that every instance of an ' <strong>idiopathic achalasia</strong>' is also an instance of the class of things that have at least one 'has modifier' relationship to an <strong>idiopathic disease</strong>. In OWL, we do this by creating an existential restriction on the <strong>idiopathic achalasia</strong> class.</p>
<ol>
<li>In the Entities tab, select '<strong>idiopathic achalasia</strong>' in the class hierarchy and look at its current class description in the bottom right box. </li>
<li>Note that there are two superclasses (as denoted by the SubClass Of list). '<strong>'gastroesophageal disease'</strong>' and <strong>'has modifier' some idiopathic</strong>.</li>
<li>Run the reasoner.</li>
<li>You should see that this class is now inferred to be an <strong>idiopathic disease</strong> because of this SubClassOf (superclass) restriction.</li>
</ol>
<h2 id="equivalence-axioms-and-automatic-classification">Equivalence Axioms and Automatic classification<a class="headerlink" href="#equivalence-axioms-and-automatic-classification" title="Permanent link">&para;</a></h2>
<p>This example introduces <strong>equivalence axioms</strong> or <strong>defined classes</strong> (also called **logical definitions) and automatic classification.</p>
<p>The example involves classification of Mendelian diseases that have a monogenic (single gene) varation. These equivalence axioms are based off the Mondo Deisgn Pattern <a href="https://github.com/monarch-initiative/mondo/blob/master/src/patterns/dosdp-patterns/disease_series_by_gene.yaml">disease_series_by_gene</a>. </p>
<p>Constructs:
- and (intersection)
- equivalence (logical definitions)
- existential restrictions (e.g. 'disease has basis in dysfunction of')</p>
<h3 id="add-an-equivalence-axiom-to-an-existing-mondo-term">Add an equivalence axiom to an existing Mondo term<a class="headerlink" href="#add-an-equivalence-axiom-to-an-existing-mondo-term" title="Permanent link">&para;</a></h3>
<ol>
<li>Create a new branch and open (or re-open) mondo-edit.obo</li>
<li>Navigate to the class <code>'cardioacrofacial dysplasia 1'</code></li>
<li>According to <a href="https://omim.org/entry/619142">OMIM</a>, this disease is caused by a variation in the gene PRKACA.</li>
<li>We want to add an equivalence axiom that says every instance of this class is a type of <code>'cardioacrofacial dysplasia'</code> that has dysfunction in the PRKACA gene.</li>
<li>To do this, click the + next to Equivalent To in the lower right Description box.</li>
<li>Add the following equivalence axiom:
<code>'cardioacrofacial dysplasia'
 and ('disease has basis in dysfunction of' some PRKACA)</code></li>
<li>Run the reasoner.</li>
<li>You shouldn't see any change, but try deleting the superclass assertion to 'cardioacrofacial dysplasia' and re-running the reasoner.</li>
<li>You should see that 'cardioacrofacial dysplasia' is an inferred superclass.</li>
<li>Undo the last change and save your work and commmit and create a pull request.</li>
</ol>
<h3 id="adding-classes-and-automatically-classifying-them">Adding classes and automatically classifying them<a class="headerlink" href="#adding-classes-and-automatically-classifying-them" title="Permanent link">&para;</a></h3>
<p>For teaching purposes, let's say we need a new class that is 'fungal allergy'.</p>
<ol>
<li>Create a branch and re-open mondo-edit.obo</li>
<li>Add a new term under owl:Thing named 'fungal allergy'. </li>
<li>Following the design pattern <a href="https://github.com/monarch-initiative/mondo/blob/master/src/patterns/dosdp-patterns/allergy.yaml">allergy.yaml</a>, add the text definition, synonym and equivalentTo axiom, using the substance ECTO_0000524 'exposure to mycotoxin'.</li>
<li>Run the reasoner and note where the class is automatically classified.</li>
<li>Create a pull request and note in the PR what the parent class is.</li>
</ol>
<h3 id="debugging-automatic-classifications">Debugging automatic classifications<a class="headerlink" href="#debugging-automatic-classifications" title="Permanent link">&para;</a></h3>
<ol>
<li>On the same branch, add a new term under owl:Thing named 'oral cavity neoplasm'.</li>
<li>Following the design pattern <a href="https://github.com/monarch-initiative/mondo/blob/master/src/patterns/dosdp-patterns/neoplasm_by_origin.yaml">neoplasm_by_origin</a>, add the term label and the equivalence axiom.</li>
<li>Run the reasoner and note where the term in automatically classified. You should see it is under owl:Nothing.</li>
<li>Click the ? next to owl:Nothing in the Description box to see the explanation.</li>
<li>Can you determine why this is an unsatisfiable class? </li>
<li>Create a pull request and add a comment explaining why this is unsatisfiable.</li>
</ol>
<h2 id="disjointness">Disjointness<a class="headerlink" href="#disjointness" title="Permanent link">&para;</a></h2>
<p>By default, OWL assumes that these classes can overlap, i.e. there are individuals who can be instances of more than one of these classes. We want to create a restriction on our ontology that states these classes are different and that no individual can be a member of more than one of these classes. We can say this in OWL by creating a <em>disjoint classes</em> axiom.</p>
<ol>
<li>Create a branch in the Mondo repo (name it: disjoint-[your initials]. For example: disjoint-nv)</li>
<li>Open the mondo-edit.obo file</li>
<li>Per this <a href="https://github.com/monarch-initiative/mondo/issues/1221">ticket</a>, we want to assert that <strong>infectious disease</strong> and <strong>'syndromic disease'</strong> are disjoint. </li>
<li>To do this first search for and select the <strong>infectious disease</strong> class. </li>
<li>In the class 'Description' view, scroll down and select the (+) button next to Disjoint With. You are presented with the now familiar window allowing you to select, or type, to choose a class. In the Expression editor, add 'syndromic disease' as disjoint with 'infectious disease'.</li>
<li>Run the ELK reasoner.</li>
<li>Scroll to the top of your hierarchy and note that owl:Nothing has turned red. This is because there are unsatisfiable classes.</li>
</ol>
<h3 id="review-and-fix-one-unsatisfiable-class">Review and fix one unsatisfiable class<a class="headerlink" href="#review-and-fix-one-unsatisfiable-class" title="Permanent link">&para;</a></h3>
<p>Below we'll review an example of one class and how to fix it. Next you should review and fix another one on your own and create a pull request for Nicole or Nico to review. Note, fixing these may require a bit of review and subjective decision making and the fix described below may not necessarily apply to each case.</p>
<ol>
<li>Review <code>Bickerstaff brainstem encephalitis</code>: To understand why this class appeared under owl:Nothing, first click the ? next to owl:Nothing in the Description box. (Note, this can take a few minutes).</li>
</ol>
<p><img alt="image" src="https://user-images.githubusercontent.com/6722114/131927956-de79cfd5-404d-49ec-8bd9-198719ab6bd5.png" /></p>
<ol>
<li>The explanation is displayed above - it is because this class is a descedent of <code>Guillain-Barre syndrome</code>, which is a child of <code>syndromic disease</code>. </li>
<li>Next, we have to ask if <code>Bickerstaff brainstem encephalitis</code> is an appropriate child of <code>regional variant of Guillain-Barre syndrome</code>. Note, Mondo integrates several disease terminologies and ontologies, and brought in all the subclass hierarchies from these source ontologies. To see the source of this superclass assertion, click the @ next to the assertion.</li>
<li>This source came from Orphanet, see below.</li>
</ol>
<p><img alt="image" src="https://user-images.githubusercontent.com/6722114/131928141-6706b3b7-f9e2-4726-84ee-7021922f9688.png" /></p>
<ol>
<li>Based on the text definition, there does not seem to be any suggestion that this disease is a type of Guillain-Barre syndrome.</li>
<li>Assuming that this disease is not a type of Guillain-Barre syndrome, we should exclude the superclass <code>regional variant of Guillain-Barre syndrome</code> (see this <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7524576/">paper</a> and this <a href="https://jnnp.bmj.com/content/70/1/50">paper</a>. It seems a bit unclear what the relationship of BBE is to Guillain-Barre syndrome. This also brings into the question if a disease can be syndromic and an infectious disease - maybe this disjoint axiom is wrong, but let's not worry about this for the teaching purposes.)</li>
<li>To exclude a superclass, follow the instructions <a href="https://mondo.readthedocs.io/en/latest/editors-guide/revise-terms-in-mondo/#exclude-a-superclass">here</a>.</li>
</ol>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
